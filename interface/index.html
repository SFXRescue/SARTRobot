<!DOCTYPE html>
<html>
<!--#############################################################
	# Created by the Semi Autonomous Rescue Team				#
	# Licensed under the GNU General Public License 3.0			#
	##########################################################-->

<title>S.A.R.T. Interface</title>

<head>
	<!--Link CSS and scripts-->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="css/favicon.ico" type="image/x-icon" />

	<!-- Interface CSS -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/circle.css">
	<link rel="stylesheet" href="css/bootoast.min.css">
	<link rel="stylesheet" href="css/sart.style.css">
	<!-- Syntax highlighting -->
	<link rel="stylesheet" href="css/monokai.css">

	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- Gamepad -->
	<script src="js/gamepad.js"></script>
	<!-- Keyboard -->
	<script src="js/keyboard.min.js"></script>
	<!-- UI scripts -->
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/bootoast-fa.min.js"></script>
	<script src="js/Chart.bundle.js"></script>
	<!-- Syntax highlighting -->
	<script src="js/highlight.pack.js"></script>
	<!-- YAML -->
	<script src="js/js-yaml.min.js"></script>
	<!-- Font Awesome -->
	<script defer src="js/fontawesome/fontawesome.js"></script>
	<script defer src="js/fontawesome/solid.js"></script>
	<!-- S.A.R.T. Scripts -->
	<script src="js/sart.interface.js"></script>
	<script src="js/sart.ssh.js"></script>
	<script src="js/sart.demo.js"></script>
	<script src="js/sart.sensors.js"></script>
	<script src="js/sart.charts.config.js"></script>
	<script src="js/sart.control.js"></script>

</head>

<body>
	<!-- SSH MODAL -->
	<div class="modal fade top" id="sshModal" role="dialog" data-backdrop="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title"><i class="fas fa-fw fa-terminal"></i> SSH</h4>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body ssh-container">
					<ul id="ssh-term-list" class="nav nav-tabs" role="tablist">
						<li class="nav-item ssh-tab" id="ssh-tab-1">
							<a class="nav-link text-dark active" href="#ssh-term-1" role="tab" data-toggle="tab" aria-selected="true"><i class="fa fa-fw fa-terminal"></i> 1</a>
						</li>
						<li class="nav-item" id="ssh-new-tab">
							<span class="d-inline-block" rel="tooltip" data-placement="top" title="Open new tab">
								<a class="nav-link text-dark" ><i class="fa fa-fw fa-plus"></i></a>
							</span>
						</li>
					</ul>

					<!-- Tab panes -->
					<div id="ssh-term-content" class="tab-content">
						<div class="tab-pane fade show active" id="ssh-term-1">
							<iframe id="ssh_iframe_1" src="" width="100%" height="400px" onload="focusCurrentSsh()"></iframe>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Refresh current tab">
						<button type="button" class="btn btn-warning btn-default" id="ssh-refresh-button"><i
							class="fa fa-fw fa-redo-alt"></i> Refresh</button>
					</span>
					<button type="button" class="btn btn-danger btn-default" data-dismiss="modal">&times; Close</button>
				</div>
			</div>
		</div>
	</div>
	<!-- LOG MODAL -->
	<div class="modal fade top" id="logModal" role="dialog" data-backdrop="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title"><i class="fas fa-fw fa-clipboard-list"></i> Logs</h4>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<ul class="nav nav-tabs" id="logTab" role="tablist">
						<li class="nav-item">
							<a class="nav-link text-dark active" id="gamepad-monitor-tab" data-toggle="tab"
								href="#gamepad-monitor" role="tab" aria-controls="gamepad-monitor"
								aria-selected="true"><i class="fa fa-fw fa-gamepad"></i> Gamepad Monitor</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" id="sensor-monitor-tab" data-toggle="tab"
								href="#sensor-monitor" role="tab" aria-controls="sensor-monitor"
								aria-selected="false"><i class="fa fa-fw fa-chart-area"></i> Sensor Monitor</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" id="gamepad-log-tab" data-toggle="tab" href="#gamepad-log"
								role="tab" aria-controls="gamepad-log" aria-selected="false"><i
									class="fa fa-fw fa-inbox"></i> Message Log</a>
						</li>
					</ul>
					<div class="tab-content" id="logTabContent">
						<div class="tab-pane fade show active" id="gamepad-monitor" role="tabpanel"
							aria-labelledby="gamepad-monitor-tab">
							<p>
								<pre><code id="gamepad-monitor-pre" class="JSON" contenteditable="true"></code></pre>
							</p>
						</div>
						<div class="tab-pane fade" id="sensor-monitor" role="tabpanel"
							aria-labelledby="sensor-monitor-tab">
							<p>
								<pre><code id="sensor-monitor-pre" class="JSON" contenteditable="true"></code></pre>
							</p>
						</div>
						<div class="tab-pane fade" id="gamepad-log" role="tabpanel" aria-labelledby="gamepad-log-tab">
							<br /><button type="button" class="btn btn-secondary" id="gamepad-log-select-button">
								<i class="fa fa-fw fa-check-square"></i> Select All
							</button>
							<button type="button" class="btn btn-danger" id="gamepad-log-clear-button">
								<i class="fa fa-fw fa-trash-alt"></i> Clear
							</button>
							<p>
								<pre><code id="gamepad-log-pre" class="JSON" contenteditable="true"></code></pre>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- SETTINGS MODAL -->
	<div class="modal fade top" id="settingsModal" role="dialog" data-backdrop="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title"><i class="fas fa-fw fa-cog"></i> Settings</h4>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<ul class="nav nav-tabs" id="settingsTab" role="tablist">
						<li class="nav-item">
							<a class="nav-link text-dark active" id="config-editor-tab" data-toggle="tab"
								href="#config-editor" role="tab" aria-controls="config-editor" aria-selected="true"><i
									class="fa fa-fw fa-file-alt"></i> Config Editor</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" id="system-control-tab" data-toggle="tab"
								href="#system-control" role="tab" aria-controls="system-control"
								aria-selected="false"><i class="fa fa-fw fa-exclamation-triangle"></i> System
								Control</a>
						</li>
						<li class="nav-item">
							<a class="nav-link text-dark" id="about-tab" data-toggle="tab" href="#about" role="tab"
								aria-controls="about" aria-selected="false"><i class="fa fa-fw fa-question-circle"></i>
								About</a>
						</li>
					</ul>
					<div class="tab-content" id="logTabContent">
						<div class="tab-pane fade active show" id="config-editor" role="tabpanel"
							aria-labelledby="config-editor-tab">
							<br />
							<button type="button" class="btn btn-secondary" id="config-editor-select-button">
								<i class="fa fa-fw fa-check-square"></i> Select All
							</button>
							<div class="float-right">
								<button type="button" class="btn btn-info" id="config-editor-reload-button">
									<i class="fa fa-fw fa-redo"></i> Reload
								</button>
								<button type="button" class="btn btn-success" id="config-editor-save-button">
									<i class="fa fa-fw fa-save"></i> Save
								</button>
							</div>
							<p>
								<pre><code id="config-editor-pre" class="JSON" contenteditable="true" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></code></pre>
							</p>
							<p>
								You may need to restart scripts to apply some changes.
							</p>
						</div>
						<div class="tab-pane fade" id="system-control" role="tabpanel"
							aria-labelledby="system-control-tab">
							<br />
							<button type="button" class="btn btn-warning" id="restart-scripts-button">
								<i class="fa fa-fw fa-undo"></i> Restart Scripts
							</button>
							<button type="button" class="btn btn-danger float-right" id="kill-scripts-button">
								<i class="fa fa-fw fa-skull"></i> Kill Scripts
							</button>
						</div>
						<div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="about-tab">
							<br />
							<h4>About</h4>
							<p>
								Created by the <em>Semi Autonomous Rescue Team</em>
								(<a href="https://www.sfxrescue.com/">https://www.sfxrescue.com/</a>)
							</p>
							<h4>Open Source Licenses</h4>
							<ul>
								<li>
									<strong>Bootoast</strong>
									&lt;<a href="https://github.com/odahcam/bootoast">https://github.com/odahcam/bootoast</a>&gt;<br/>
									Released under the MIT license
								</li>
								<li>
									<strong>Bootstrap</strong>
									&lt;<a href="https://getbootstrap.com/">https://getbootstrap.com/</a>&gt;<br/>
									Released under the MIT license
								</li>
								<li>
									<strong>Chart.js</strong>
									&lt;<a href="https://www.chartjs.org/">https://www.chartjs.org/</a>&gt;<br/>
									Released under the MIT license
								</li>
								<li>
									<strong>Font Awesome</strong>
									&lt;<a href="https://fontawesome.com/">https://fontawesome.com/</a>&gt;<br/>
									Released under the MIT license. Icons released under CC BY 4.0 license
								</li>
								<li>
									<strong>gamepad.js</strong>
									&lt;<a href="http://kallaspriit.github.io/HTML5-JavaScript-Gamepad-Controller-Library/">http://kallaspriit.github.io/HTML5-JavaScript-Gamepad-Controller-Library/</a>&gt;<br/>
									Released under the MIT license
								</li>
								<li>
									<strong>highlight.js</strong>
									&lt;<a href="https://highlightjs.org/">https://highlightjs.org/</a>&gt;<br/>
									Released under the BSD license
								</li>
								<li>
									<strong>jQuery</strong>
									&lt;<a href="https://jquery.com/">https://jquery.com/</a>&gt;<br/>
									Released under the MIT license
								</li>
								<li>
									<strong>JS-YAML</strong>
									&lt;<a href="https://github.com/nodeca/js-yaml">https://github.com/nodeca/js-yaml</a>&gt;<br/>
									Released under the MIT license
								</li>
								<li>
									<strong>KeyboardJS</strong>
									&lt;<a href="https://github.com/RobertWHurst/KeyboardJS">https://github.com/RobertWHurst/KeyboardJS</a>&gt;<br/>
									Released under the MIT license
									<span class="float-right" id="user-agent"><i class="fa fa-fw fa-user-secret"></i></span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- NAVIGATION BAR -->
	<nav class="navbar navbar-toggleable-sm navbar-fixed-top navbar-light bg-light main-nav">
		<div class="container-fluid">
			<ul class="nav navbar-nav">
				<li class="nav-item">
					<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
						<div id="controller-status-disconnected" class="btn-group mr-2" role="group">
							<span class="d-inline-block" rel="tooltip" data-placement="bottom"
								title="Gamepad connection status">
								<button type="button" id="controller_status" class="btn btn-danger">
									<i class="fa fa-fw fa-gamepad"></i> Press a button to connect
								</button>
							</span>
						</div>
						<div id="controller-status-connected" class="btn-group mr-2" role="group">
							<div class="input-group ">
								<div class="input-group-prepend">
									<button rel="tooltip" data-placement="bottom" title="Gamepad connection status"
										class="btn btn-success btn" type="button">
										<i class='fa fa-fw fa-gamepad'></i>
									</button>
								</div>
								<select class='custom-select' id='gamepadSelect'></select>
							</div>
						</div>
						<div class="btn-group" role="group">
							<span class="d-inline-block" rel="tooltip" data-placement="bottom"
								title="Robot connection status">
								<button type="button" id="robot_status" class="btn btn-danger"
									style="pointer-events: none">
									<i class="fa fa-fw fa-unlink"></i> Disconnected from robot
								</button>
							</span>
						</div>
					</div>
				</li>
			</ul>
			<ul class="nav navbar-nav abs-center-x">
				<li class="nav-item">
					<button type="button" class="btn btn-light" id="nav_title" data-toggle="tooltip"
						data-placement="bottom" title="Reload page">
						<span style="color: #FF5A00">S.A.R.T.</span> Control Interface 
						<div class="float-right banner" id="demo-mode-indicator"><blink class="ugly">Demo Mode</blink></div>
					</button>
				</li>
			</ul>
			<div class="inline">
				<button type="button" class="btn btn-outline-dark" id="sensorToggle" data-toggle="tooltip"
					data-placement="bottom" title="Swap between sensor and camera view" data-trigger="hover">
					<i class="fa fa-fw fa-chart-area"></i> Show Sensors
				</button>
				<button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#sshModal"
					rel="tooltip" data-placement="bottom" title="Open SSH window">
					<i class="fa fa-fw fa-terminal"></i> SSH
				</button>
				<button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#logModal"
					rel="tooltip" data-placement="bottom" title="Open log window">
					<i class="fa fa-fw fa-clipboard-list"></i> Logs
				</button>
				<button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#settingsModal"
					rel="tooltip" data-placement="bottom" title="Open settings">
					<i class="fa fa-fw fa-cog"></i>
				</button>
				<div class="btn-group dropdown" role="group">
					<button id="powerButtonDropdown" type="button" class="btn btn-outline-danger dropdown-toggle"
						data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="fa fa-fw fa-power-off"></i> Power
					</button>
					<div class="dropdown-menu dropdown-menu-right" aria-labelledby="btnGroupDrop1">
						<h6 class="dropdown-header">Power options</h6>
						<a class="dropdown-item" href="#" id="shutdownButton" rel="tooltip" data-placement="left"
							title="Safely power off the robot"><i class="fa fa-fw fa-power-off"></i> Shutdown</a>
						<a class="dropdown-item" href="#" id="rebootButton" rel="tooltip" data-placement="left"
							title="Safely reboot the robot"><i class="fa fa-fw fa-undo"></i> Reboot</a>
						<div class="dropdown-divider" id="power-options-divider"></div>
						<a class="dropdown-item" href="#" onclick="DemoMode()" rel="tooltip" data-placement="left"
							title="Load demo mode" id="demo-mode-button"><i class="fa fa-fw fa-object-group"></i> Demo Mode</a>
					</div>
				</div>
			</div>
		</div>
	</nav>
	<!-- CONTENT -->
	<div class="container-fluid" style="padding-top: 10px">
		<div class="row justify-content-md-center">
			<div class="col-md-auto">
				<div class="row">
					<div class="col">
						<div class="card">
							<div class="card-body">
								<div id="cputemp_graph" class="c100 p0 med orange center">
									<span id="cputemp_level">0°C</span>
									<div class="slice">
										<div class="bar"></div>
										<div class="fill"></div>
									</div>
								</div>
							</div>
							<div class="card-header">
								<span>CPU Temp.</span><br />
							</div>
						</div>
					</div>
					<div class="col">
						<div class="card">
							<div class="card-body">
								<div id="charge_graph" class="c100 p0 med orange center">
									<span id="charge_level">0%</span>
									<div class="slice">
										<div class="bar"></div>
										<div class="fill"></div>
									</div>
								</div>
							</div>
							<div class="card-header">
								<span>Charge Level</span><br />
							</div>
						</div>
					</div>
				</div>
				<div class="row" style="padding-top: 12px">
					<div class="col">
						<div class="card">
							<ul class="list-group list-group-flush font-weight-light">
								<li class="list-group-item"><strong>Uptime: </strong><span style="float:right;"
										id="uptime">0:00:00</span></li>
								<li class="list-group-item"><strong>Memory: </strong><span style="float:right;"
										id="memory"><span id="memory_used">0</span>/<span id="memory_total">0</span>
										MB</span></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-auto cameraWrapper" id="camera_front_card">
				<div class="card" style="border: 0px">
					<div class="d-flex justify-content-center">
						<div id="spinner" class="spinner-border text-warning loading-spinner"
							style="width: 3rem; height: 3rem;" role="status">
							<span class="sr-only">Loading...</span>
						</div>
					</div>
					<img id="camera_front" width="512" class="streamImage" src="" refresh_src=""/>
					<div class="cameraButtons">
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Refresh">
							<button type="button" class="btn btn-dark camera-refresh-button"><i
							class="fa fa-fw fa-redo-alt"></i></button>
						</span>
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Screenshot">
							<button type="button" class="btn btn-dark camera-screenshot-button"><i
							class="fa fa-fw fa-camera"></i></button>
						</span>
					</div>
				</div>
			</div>
			<div class="col-md-auto">
				<div class="row">
					<div class="col">
						<div class="card">
							<div class="card-body">
								<div id="co2_graph" class="c100 p0 med orange center">
									<span id="co2_level">0<span style="font-size: 10px"> ppm</span></span>
									<div class="slice">
										<div class="bar"></div>
										<div class="fill"></div>
									</div>
								</div>
							</div>
							<div class="card-header">
								<span>CO<sub>2</sub> Level</span><br />
							</div>
						</div>
					</div>
					<div class="col">
						<div class="card">
							<div class="card-body">
								<div id="tvoc_graph" class="c100 p0 med orange center">
									<span id="tvoc_level">0<span style="font-size: 10px"> ppb</span></span>
									<div class="slice">
										<div class="bar"></div>
										<div class="fill"></div>
									</div>
								</div>
							</div>
							<div class="card-header">
								<span>TVOC Level</span><br />
							</div>
						</div>
					</div>
				</div>
				<div class="row" style="padding-top: 12px">
					<div class="col">
						<div class="card">
							<ul class="list-group list-group-flush font-weight-light">
								<li class="list-group-item">
									<p style="margin-bottom: 0.5rem;">Gamepad speed <kbd class="float-right">dpad
											▼/▲</kbd></p>
									<div class="progress">
										<div id="gp_speed_node_1" class="progress-bar pb-en bg-success">1</div>
										<div id="gp_speed_node_2" class="progress-bar pb-en bg-success">2</div>
										<div id="gp_speed_node_3" class="progress-bar pb-en bg-success">3</div>
										<div id="gp_speed_node_4" class="progress-bar pb-en bg-success">4</div>
										<div id="gp_speed_node_5" class="progress-bar pb-en bg-success">5</div>
										<div id="gp_speed_node_6" class="progress-bar pb-dis bg-success">6</div>
										<div id="gp_speed_node_7" class="progress-bar pb-dis bg-warning">7</div>
										<div id="gp_speed_node_8" class="progress-bar pb-dis bg-danger">8</div>
									</div>
								</li>
								<li class="list-group-item">
									<p style="margin-bottom: 0.5rem;">Keyboard speed <kbd class="float-right">➖/➕</kbd>
									</p>
									<div class="progress">
										<div id="kb_speed_node_1" class="progress-bar pb-en bg-success">1</div>
										<div id="kb_speed_node_2" class="progress-bar pb-en bg-success">2</div>
										<div id="kb_speed_node_3" class="progress-bar pb-en bg-success">3</div>
										<div id="kb_speed_node_4" class="progress-bar pb-en bg-success">4</div>
										<div id="kb_speed_node_5" class="progress-bar pb-en bg-success">5</div>
										<div id="kb_speed_node_6" class="progress-bar pb-dis bg-success">6</div>
										<div id="kb_speed_node_7" class="progress-bar pb-dis bg-warning">7</div>
										<div id="kb_speed_node_8" class="progress-bar pb-dis bg-danger">8</div>
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-md-center" id="btm_view_sensors" style="padding-top:20px">
			<div class="col-md-auto" id="distance_card">
				<div class="card">
					<div class="card-header">
						<i class="fas fa-fw fa-chart-pie"></i> Distance
					</div>
					<div class="card-body">
						<canvas id="distChart" width="400" height="200"></canvas>
					</div>
				</div>
			</div>
			<div class="col-md-auto" id="thermal_camera_card">
				<div class="card">
					<div class="card-header">
						<i class="fas fa-fw fa-camera"></i> Thermal Camera
					</div>
					<div id="thermal_camera"></div>
				</div>
			</div>
			<div class="col-md-auto" id="temperature_card">
				<div class="card">
					<div class="card-header">
						<i class="fas fa-fw fa-thermometer-half"></i> Temperature
					</div>
					<div class="card-body">
						<canvas id="tempChart" width="400" height="200"></canvas>
					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-md-center no-gutters" id="btm_view_camera">
			<div class="col-md-auto cameraWrapper" id="camera_left_card">
				<div class="card" style="border: 0px">
					<img id="camera_left" width="420" class="img-fluid streamImage" src="" refresh_src="" />
					<div class="cameraButtons">
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Refresh">
							<button type="button" class="btn btn-dark camera-refresh-button"><i
							class="fa fa-fw fa-redo-alt"></i></button>
						</span>
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Screenshot">
							<button type="button" class="btn btn-dark camera-screenshot-button"><i
							class="fa fa-fw fa-camera"></i></button>
						</span>
					</div>
				</div>
			</div>
			<div class="col-md-auto cameraWrapper" id="camera_back_card">
				<div class="card" style="border: 0px">
					<img id="camera_back" width="420" class="img-fluid streamImage" src="" refresh_src="" />
					<div class="cameraButtons">
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Refresh">
							<button type="button" class="btn btn-dark camera-refresh-button"><i
							class="fa fa-fw fa-redo-alt"></i></button>
						</span>
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Screenshot">
							<button type="button" class="btn btn-dark camera-screenshot-button"><i
							class="fa fa-fw fa-camera"></i></button>
						</span>
					</div>
				</div>
			</div>
			<div class="col-md-auto cameraWrapper" id="camera_right_card">
				<div class="card" style="border: 0px">
					<img id="camera_right" width="420" class="img-fluid streamImage" src="" refresh_src="" />
					<div class="cameraButtons">
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Refresh">
							<button type="button" class="btn btn-dark camera-refresh-button"><i
							class="fa fa-fw fa-redo-alt"></i></button>
						</span>
						<span class="d-inline-block" rel="tooltip" data-placement="bottom" title="Screenshot">
							<button type="button" class="btn btn-dark camera-screenshot-button"><i
							class="fa fa-fw fa-camera"></i></button>
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>

</html>
